// Copyright 2015 Google Inc. All rights reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

#include <cstdlib>
#include "font_manager.h"
#include "fplbase/fpl_common.h"

namespace flatui {

// A table to convert ISO 639 + ISO ISO3166-1 Alpha 2 based language code
// (e.g. 'en_US') to ISO 15924 script code (e.g. 'Latn') and a layout
// direction.
//
// The table is sorted in an alphabetic order, can be used with binary-search.
//
// Original information is retrieved from :
// http://stackoverflow.com/questions/16447807/get-an-iso-15924-script-code-for-a-given-ietf-language-tag-or-iso-639-iso-3166
// https://en.wikipedia.org/wiki/ISO_15924
// and modified.
const ScriptInfo FontManager::script_table_[] = {
    {"aa", "Latn", TextLayoutDirectionLTR},
    {"ab", "Cyrl", TextLayoutDirectionLTR},
    {"abq", "Cyrl", TextLayoutDirectionLTR},
    {"ace", "Latn", TextLayoutDirectionLTR},
    {"ach", "Latn", TextLayoutDirectionLTR},
    {"ada", "Latn", TextLayoutDirectionLTR},
    {"ady", "Cyrl", TextLayoutDirectionLTR},
    {"ae", "Avst", TextLayoutDirectionRTL},
    {"af", "Latn", TextLayoutDirectionLTR},
    {"agq", "Latn", TextLayoutDirectionLTR},
    {"aii", "Cyrl", TextLayoutDirectionLTR},
    {"ain", "Kana", TextLayoutDirectionLTR},
    {"ak", "Latn", TextLayoutDirectionLTR},
    {"akk", "Xsux", TextLayoutDirectionLTR},
    {"ale", "Latn", TextLayoutDirectionLTR},
    {"alt", "Cyrl", TextLayoutDirectionLTR},
    {"am", "Ethi", TextLayoutDirectionLTR},
    {"amo", "Latn", TextLayoutDirectionLTR},
    {"an", "Latn", TextLayoutDirectionLTR},
    {"anp", "Deva", TextLayoutDirectionLTR},
    {"ar", "Arab", TextLayoutDirectionRTL},
    {"ar-IR", "Syrc", TextLayoutDirectionRTL},
    {"arc", "Armi", TextLayoutDirectionRTL},
    {"arn", "Latn", TextLayoutDirectionLTR},
    {"arp", "Latn", TextLayoutDirectionLTR},
    {"arw", "Latn", TextLayoutDirectionLTR},
    {"as", "Beng", TextLayoutDirectionLTR},
    {"asa", "Latn", TextLayoutDirectionLTR},
    {"ast", "Latn", TextLayoutDirectionLTR},
    {"av", "Cyrl", TextLayoutDirectionLTR},
    {"awa", "Deva", TextLayoutDirectionLTR},
    {"ay", "Latn", TextLayoutDirectionLTR},
    {"az", "Latn", TextLayoutDirectionLTR},
    {"az-AZ", "Cyrl", TextLayoutDirectionLTR},
    {"az-IR", "Arab", TextLayoutDirectionRTL},
    {"ba", "Cyrl", TextLayoutDirectionLTR},
    {"bal", "Arab", TextLayoutDirectionRTL},
    {"bal-IR", "Latn", TextLayoutDirectionLTR},
    {"bal-PK", "Latn", TextLayoutDirectionLTR},
    {"ban", "Latn", TextLayoutDirectionLTR},
    {"ban-ID", "Bali", TextLayoutDirectionLTR},
    {"bas", "Latn", TextLayoutDirectionLTR},
    {"bax", "Bamu", TextLayoutDirectionLTR},
    {"bbc", "Latn", TextLayoutDirectionLTR},
    {"bbc-ID", "Batk", TextLayoutDirectionLTR},
    {"be", "Cyrl", TextLayoutDirectionLTR},
    {"bej", "Arab", TextLayoutDirectionRTL},
    {"bem", "Latn", TextLayoutDirectionLTR},
    {"bez", "Latn", TextLayoutDirectionLTR},
    {"bfq", "Taml", TextLayoutDirectionLTR},
    {"bft", "Arab", TextLayoutDirectionRTL},
    {"bfy", "Deva", TextLayoutDirectionLTR},
    {"bg", "Cyrl", TextLayoutDirectionLTR},
    {"bh", "Deva", TextLayoutDirectionLTR},
    {"bhb", "Deva", TextLayoutDirectionLTR},
    {"bho", "Deva", TextLayoutDirectionLTR},
    {"bi", "Latn", TextLayoutDirectionLTR},
    {"bik", "Latn", TextLayoutDirectionLTR},
    {"bin", "Latn", TextLayoutDirectionLTR},
    {"bjj", "Deva", TextLayoutDirectionLTR},
    {"bku", "Latn", TextLayoutDirectionLTR},
    {"bla", "Latn", TextLayoutDirectionLTR},
    {"blt", "Tavt", TextLayoutDirectionLTR},
    {"bm", "Latn", TextLayoutDirectionLTR},
    {"bn", "Beng", TextLayoutDirectionLTR},
    {"bo", "Tibt", TextLayoutDirectionLTR},
    {"bqv", "Latn", TextLayoutDirectionLTR},
    {"br", "Latn", TextLayoutDirectionLTR},
    {"bra", "Deva", TextLayoutDirectionLTR},
    {"brx", "Deva", TextLayoutDirectionLTR},
    {"bs", "Latn", TextLayoutDirectionLTR},
    {"btv", "Deva", TextLayoutDirectionLTR},
    {"bua", "Cyrl", TextLayoutDirectionLTR},
    {"buc", "Latn", TextLayoutDirectionLTR},
    {"bug", "Latn", TextLayoutDirectionLTR},
    {"bug-ID", "Bugi", TextLayoutDirectionLTR},
    {"bya", "Latn", TextLayoutDirectionLTR},
    {"byn", "Ethi", TextLayoutDirectionLTR},
    {"ca", "Latn", TextLayoutDirectionLTR},
    {"cad", "Latn", TextLayoutDirectionLTR},
    {"car", "Latn", TextLayoutDirectionLTR},
    {"cay", "Latn", TextLayoutDirectionLTR},
    {"cch", "Latn", TextLayoutDirectionLTR},
    {"ccp", "Beng", TextLayoutDirectionLTR},
    {"ce", "Cyrl", TextLayoutDirectionLTR},
    {"ceb", "Latn", TextLayoutDirectionLTR},
    {"cgg", "Latn", TextLayoutDirectionLTR},
    {"ch", "Latn", TextLayoutDirectionLTR},
    {"chk", "Latn", TextLayoutDirectionLTR},
    {"chm", "Cyrl", TextLayoutDirectionLTR},
    {"chn", "Latn", TextLayoutDirectionLTR},
    {"cho", "Latn", TextLayoutDirectionLTR},
    {"chp", "Latn", TextLayoutDirectionLTR},
    {"chr", "Cher", TextLayoutDirectionLTR},
    {"chy", "Latn", TextLayoutDirectionLTR},
    {"cja", "Arab", TextLayoutDirectionRTL},
    {"cjm", "Cham", TextLayoutDirectionLTR},
    {"cjs", "Cyrl", TextLayoutDirectionLTR},
    {"ckb", "Arab", TextLayoutDirectionRTL},
    {"ckt", "Cyrl", TextLayoutDirectionLTR},
    {"co", "Latn", TextLayoutDirectionLTR},
    {"cop", "Arab", TextLayoutDirectionRTL},
    {"cpe", "Latn", TextLayoutDirectionLTR},
    {"cr", "Cans", TextLayoutDirectionLTR},
    {"crh", "Cyrl", TextLayoutDirectionLTR},
    {"crk", "Cans", TextLayoutDirectionLTR},
    {"cs", "Latn", TextLayoutDirectionLTR},
    {"csb", "Latn", TextLayoutDirectionLTR},
    {"cu", "Glag", TextLayoutDirectionLTR},
    {"cv", "Cyrl", TextLayoutDirectionLTR},
    {"cy", "Latn", TextLayoutDirectionLTR},
    {"da", "Latn", TextLayoutDirectionLTR},
    {"dak", "Latn", TextLayoutDirectionLTR},
    {"dar", "Cyrl", TextLayoutDirectionLTR},
    {"dav", "Latn", TextLayoutDirectionLTR},
    {"de", "Latn", TextLayoutDirectionLTR},
    {"de-BR", "Runr", TextLayoutDirectionLTR},
    {"de-KZ", "Runr", TextLayoutDirectionLTR},
    {"de-US", "Runr", TextLayoutDirectionLTR},
    {"del", "Latn", TextLayoutDirectionLTR},
    {"den", "Latn", TextLayoutDirectionLTR},
    {"dgr", "Latn", TextLayoutDirectionLTR},
    {"din", "Latn", TextLayoutDirectionLTR},
    {"dje", "Latn", TextLayoutDirectionLTR},
    {"dng", "Cyrl", TextLayoutDirectionLTR},
    {"doi", "Arab", TextLayoutDirectionRTL},
    {"dsb", "Latn", TextLayoutDirectionLTR},
    {"dua", "Latn", TextLayoutDirectionLTR},
    {"dv", "Thaa", TextLayoutDirectionRTL},
    {"dyo", "Arab", TextLayoutDirectionRTL},
    {"dyu", "Latn", TextLayoutDirectionLTR},
    {"dz", "Tibt", TextLayoutDirectionLTR},
    {"ebu", "Latn", TextLayoutDirectionLTR},
    {"ee", "Latn", TextLayoutDirectionLTR},
    {"efi", "Latn", TextLayoutDirectionLTR},
    {"egy", "Egyp", TextLayoutDirectionLTR},
    {"eka", "Latn", TextLayoutDirectionLTR},
    {"eky", "Kali", TextLayoutDirectionLTR},
    {"el", "Grek", TextLayoutDirectionLTR},
    {"en", "Latn", TextLayoutDirectionLTR},
    {"eo", "Latn", TextLayoutDirectionLTR},
    {"es", "Latn", TextLayoutDirectionLTR},
    {"et", "Latn", TextLayoutDirectionLTR},
    {"ett", "Ital", TextLayoutDirectionLTR},
    {"eu", "Latn", TextLayoutDirectionLTR},
    {"evn", "Cyrl", TextLayoutDirectionLTR},
    {"ewo", "Latn", TextLayoutDirectionLTR},
    {"fa", "Arab", TextLayoutDirectionRTL},
    {"fan", "Latn", TextLayoutDirectionLTR},
    {"ff", "Latn", TextLayoutDirectionLTR},
    {"fi", "Latn", TextLayoutDirectionLTR},
    {"fil", "Latn", TextLayoutDirectionLTR},
    {"fil-US", "Tglg", TextLayoutDirectionLTR},
    {"fiu", "Latn", TextLayoutDirectionLTR},
    {"fj", "Latn", TextLayoutDirectionLTR},
    {"fo", "Latn", TextLayoutDirectionLTR},
    {"fon", "Latn", TextLayoutDirectionLTR},
    {"fr", "Latn", TextLayoutDirectionLTR},
    {"frr", "Latn", TextLayoutDirectionLTR},
    {"frs", "Latn", TextLayoutDirectionLTR},
    {"fur", "Latn", TextLayoutDirectionLTR},
    {"fy", "Latn", TextLayoutDirectionLTR},
    {"ga", "Latn", TextLayoutDirectionLTR},
    {"gaa", "Latn", TextLayoutDirectionLTR},
    {"gag", "Latn", TextLayoutDirectionLTR},
    {"gag-MD", "Cyrl", TextLayoutDirectionLTR},
    {"gay", "Latn", TextLayoutDirectionLTR},
    {"gba", "Arab", TextLayoutDirectionRTL},
    {"gbm", "Deva", TextLayoutDirectionLTR},
    {"gcr", "Latn", TextLayoutDirectionLTR},
    {"gd", "Latn", TextLayoutDirectionLTR},
    {"gez", "Ethi", TextLayoutDirectionLTR},
    {"gil", "Latn", TextLayoutDirectionLTR},
    {"gl", "Latn", TextLayoutDirectionLTR},
    {"gld", "Cyrl", TextLayoutDirectionLTR},
    {"gn", "Latn", TextLayoutDirectionLTR},
    {"gon", "Telu", TextLayoutDirectionLTR},
    {"gor", "Latn", TextLayoutDirectionLTR},
    {"got", "Goth", TextLayoutDirectionLTR},
    {"grb", "Latn", TextLayoutDirectionLTR},
    {"grc", "Cprt", TextLayoutDirectionRTL},
    {"grt", "Beng", TextLayoutDirectionLTR},
    {"gsw", "Latn", TextLayoutDirectionLTR},
    {"gu", "Gujr", TextLayoutDirectionLTR},
    {"guz", "Latn", TextLayoutDirectionLTR},
    {"gv", "Latn", TextLayoutDirectionLTR},
    {"gwi", "Latn", TextLayoutDirectionLTR},
    {"ha", "Arab", TextLayoutDirectionRTL},
    {"ha-GH", "Latn", TextLayoutDirectionLTR},
    {"ha-NE", "Latn", TextLayoutDirectionLTR},
    {"hai", "Latn", TextLayoutDirectionLTR},
    {"haw", "Latn", TextLayoutDirectionLTR},
    {"he", "Hebr", TextLayoutDirectionRTL},
    {"hi", "Deva", TextLayoutDirectionLTR},
    {"hil", "Latn", TextLayoutDirectionLTR},
    {"hit", "Xsux", TextLayoutDirectionLTR},
    {"hmn", "Latn", TextLayoutDirectionLTR},
    {"hne", "Deva", TextLayoutDirectionLTR},
    {"hnn", "Latn", TextLayoutDirectionLTR},
    {"ho", "Latn", TextLayoutDirectionLTR},
    {"hoc", "Deva", TextLayoutDirectionLTR},
    {"hoj", "Deva", TextLayoutDirectionLTR},
    {"hop", "Latn", TextLayoutDirectionLTR},
    {"hr", "Latn", TextLayoutDirectionLTR},
    {"hsb", "Latn", TextLayoutDirectionLTR},
    {"ht", "Latn", TextLayoutDirectionLTR},
    {"hu", "Latn", TextLayoutDirectionLTR},
    {"hup", "Latn", TextLayoutDirectionLTR},
    {"hy", "Armn", TextLayoutDirectionLTR},
    {"hz", "Latn", TextLayoutDirectionLTR},
    {"ia", "Latn", TextLayoutDirectionLTR},
    {"iba", "Latn", TextLayoutDirectionLTR},
    {"ibb", "Latn", TextLayoutDirectionLTR},
    {"id", "Latn", TextLayoutDirectionLTR},
    {"ig", "Latn", TextLayoutDirectionLTR},
    {"ii", "Yiii", TextLayoutDirectionLTR},
    {"ii-CN", "Latn", TextLayoutDirectionLTR},
    {"ik", "Latn", TextLayoutDirectionLTR},
    {"ilo", "Latn", TextLayoutDirectionLTR},
    {"inh", "Cyrl", TextLayoutDirectionLTR},
    {"is", "Latn", TextLayoutDirectionLTR},
    {"it", "Latn", TextLayoutDirectionLTR},
    {"iu", "Cans", TextLayoutDirectionLTR},
    {"iu-CA", "Latn", TextLayoutDirectionLTR},
    {"ja", "Jpan", TextLayoutDirectionLTR},
    {"jmc", "Latn", TextLayoutDirectionLTR},
    {"jpr", "Hebr", TextLayoutDirectionRTL},
    {"jrb", "Hebr", TextLayoutDirectionRTL},
    {"jv", "Latn", TextLayoutDirectionLTR},
    {"jv-ID", "Java", TextLayoutDirectionLTR},
    {"ka", "Geor", TextLayoutDirectionLTR},
    {"kaa", "Cyrl", TextLayoutDirectionLTR},
    {"kab", "Latn", TextLayoutDirectionLTR},
    {"kac", "Latn", TextLayoutDirectionLTR},
    {"kaj", "Latn", TextLayoutDirectionLTR},
    {"kam", "Latn", TextLayoutDirectionLTR},
    {"kbd", "Cyrl", TextLayoutDirectionLTR},
    {"kca", "Cyrl", TextLayoutDirectionLTR},
    {"kcg", "Latn", TextLayoutDirectionLTR},
    {"kde", "Latn", TextLayoutDirectionLTR},
    {"kdt", "Thai", TextLayoutDirectionLTR},
    {"kea", "Latn", TextLayoutDirectionLTR},
    {"kfo", "Latn", TextLayoutDirectionLTR},
    {"kfr", "Deva", TextLayoutDirectionLTR},
    {"kg", "Latn", TextLayoutDirectionLTR},
    {"kha", "Latn", TextLayoutDirectionLTR},
    {"kha-IN", "Beng", TextLayoutDirectionLTR},
    {"khb", "Talu", TextLayoutDirectionLTR},
    {"khq", "Latn", TextLayoutDirectionLTR},
    {"kht", "Mymr", TextLayoutDirectionLTR},
    {"ki", "Latn", TextLayoutDirectionLTR},
    {"kj", "Latn", TextLayoutDirectionLTR},
    {"kjh", "Cyrl", TextLayoutDirectionLTR},
    {"kk", "Arab", TextLayoutDirectionRTL},
    {"kk-KZ", "Cyrl", TextLayoutDirectionLTR},
    {"kk-TR", "Cyrl", TextLayoutDirectionLTR},
    {"kl", "Latn", TextLayoutDirectionLTR},
    {"kln", "Latn", TextLayoutDirectionLTR},
    {"km", "Khmr", TextLayoutDirectionLTR},
    {"kmb", "Latn", TextLayoutDirectionLTR},
    {"kn", "Knda", TextLayoutDirectionLTR},
    {"ko", "Kore", TextLayoutDirectionLTR},
    {"koi", "Cyrl", TextLayoutDirectionLTR},
    {"kok", "Deva", TextLayoutDirectionLTR},
    {"kos", "Latn", TextLayoutDirectionLTR},
    {"kpe", "Latn", TextLayoutDirectionLTR},
    {"kpy", "Cyrl", TextLayoutDirectionLTR},
    {"kr", "Latn", TextLayoutDirectionLTR},
    {"krc", "Cyrl", TextLayoutDirectionLTR},
    {"kri", "Latn", TextLayoutDirectionLTR},
    {"krl", "Latn", TextLayoutDirectionLTR},
    {"kru", "Deva", TextLayoutDirectionLTR},
    {"ks", "Arab", TextLayoutDirectionRTL},
    {"ksb", "Latn", TextLayoutDirectionLTR},
    {"ksf", "Latn", TextLayoutDirectionLTR},
    {"ksh", "Latn", TextLayoutDirectionLTR},
    {"ku", "Latn", TextLayoutDirectionLTR},
    {"ku-LB", "Arab", TextLayoutDirectionRTL},
    {"kum", "Cyrl", TextLayoutDirectionLTR},
    {"kut", "Latn", TextLayoutDirectionLTR},
    {"kv", "Cyrl", TextLayoutDirectionLTR},
    {"kw", "Latn", TextLayoutDirectionLTR},
    {"ky", "Cyrl", TextLayoutDirectionLTR},
    {"ky-CN", "Arab", TextLayoutDirectionRTL},
    {"ky-TR", "Latn", TextLayoutDirectionLTR},
    {"kyu", "Kali", TextLayoutDirectionLTR},
    {"la", "Latn", TextLayoutDirectionLTR},
    {"lad", "Hebr", TextLayoutDirectionRTL},
    {"lag", "Latn", TextLayoutDirectionLTR},
    {"lah", "Arab", TextLayoutDirectionRTL},
    {"lam", "Latn", TextLayoutDirectionLTR},
    {"lb", "Latn", TextLayoutDirectionLTR},
    {"lbe", "Cyrl", TextLayoutDirectionLTR},
    {"lcp", "Thai", TextLayoutDirectionLTR},
    {"lep", "Lepc", TextLayoutDirectionLTR},
    {"lez", "Cyrl", TextLayoutDirectionLTR},
    {"lg", "Latn", TextLayoutDirectionLTR},
    {"li", "Latn", TextLayoutDirectionLTR},
    {"lif", "Deva", TextLayoutDirectionLTR},
    {"lis", "Lisu", TextLayoutDirectionLTR},
    {"lki", "Arab", TextLayoutDirectionRTL},
    {"lmn", "Telu", TextLayoutDirectionLTR},
    {"ln", "Latn", TextLayoutDirectionLTR},
    {"lo", "Laoo", TextLayoutDirectionLTR},
    {"lol", "Latn", TextLayoutDirectionLTR},
    {"loz", "Latn", TextLayoutDirectionLTR},
    {"lt", "Latn", TextLayoutDirectionLTR},
    {"lu", "Latn", TextLayoutDirectionLTR},
    {"lua", "Latn", TextLayoutDirectionLTR},
    {"lui", "Latn", TextLayoutDirectionLTR},
    {"lun", "Latn", TextLayoutDirectionLTR},
    {"luo", "Latn", TextLayoutDirectionLTR},
    {"lus", "Beng", TextLayoutDirectionLTR},
    {"lut", "Latn", TextLayoutDirectionLTR},
    {"luy", "Latn", TextLayoutDirectionLTR},
    {"lv", "Latn", TextLayoutDirectionLTR},
    {"lwl", "Thai", TextLayoutDirectionLTR},
    {"mad", "Latn", TextLayoutDirectionLTR},
    {"mag", "Deva", TextLayoutDirectionLTR},
    {"mai", "Deva", TextLayoutDirectionLTR},
    {"mak", "Latn", TextLayoutDirectionLTR},
    {"mak-ID", "Bugi", TextLayoutDirectionLTR},
    {"man", "Latn", TextLayoutDirectionLTR},
    {"man-GN", "Nkoo", TextLayoutDirectionRTL},
    {"mas", "Latn", TextLayoutDirectionLTR},
    {"mdf", "Cyrl", TextLayoutDirectionLTR},
    {"mdh", "Latn", TextLayoutDirectionLTR},
    {"mdr", "Latn", TextLayoutDirectionLTR},
    {"men", "Latn", TextLayoutDirectionLTR},
    {"mer", "Latn", TextLayoutDirectionLTR},
    {"mfe", "Latn", TextLayoutDirectionLTR},
    {"mg", "Latn", TextLayoutDirectionLTR},
    {"mgh", "Latn", TextLayoutDirectionLTR},
    {"mh", "Latn", TextLayoutDirectionLTR},
    {"mi", "Latn", TextLayoutDirectionLTR},
    {"mic", "Latn", TextLayoutDirectionLTR},
    {"min", "Latn", TextLayoutDirectionLTR},
    {"mk", "Cyrl", TextLayoutDirectionLTR},
    {"ml", "Mlym", TextLayoutDirectionLTR},
    {"mn", "Cyrl", TextLayoutDirectionLTR},
    {"mn-CN", "Mong", TextLayoutDirectionTTB},
    {"mnc", "Mong", TextLayoutDirectionTTB},
    {"mni", "Beng", TextLayoutDirectionLTR},
    {"mni-IN", "Mtei", TextLayoutDirectionLTR},
    {"mns", "Cyrl", TextLayoutDirectionLTR},
    {"mnw", "Mymr", TextLayoutDirectionLTR},
    {"moh", "Latn", TextLayoutDirectionLTR},
    {"mos", "Latn", TextLayoutDirectionLTR},
    {"mr", "Deva", TextLayoutDirectionLTR},
    {"ms", "Arab", TextLayoutDirectionRTL},
    {"ms-MY", "Latn", TextLayoutDirectionLTR},
    {"ms-SG", "Latn", TextLayoutDirectionLTR},
    {"mt", "Latn", TextLayoutDirectionLTR},
    {"mua", "Latn", TextLayoutDirectionLTR},
    {"mus", "Latn", TextLayoutDirectionLTR},
    {"mwl", "Latn", TextLayoutDirectionLTR},
    {"mwr", "Deva", TextLayoutDirectionLTR},
    {"my", "Mymr", TextLayoutDirectionLTR},
    {"myv", "Cyrl", TextLayoutDirectionLTR},
    {"myz", "Mand", TextLayoutDirectionRTL},
    {"na", "Latn", TextLayoutDirectionLTR},
    {"nap", "Latn", TextLayoutDirectionLTR},
    {"naq", "Latn", TextLayoutDirectionLTR},
    {"nb", "Latn", TextLayoutDirectionLTR},
    {"nd", "Latn", TextLayoutDirectionLTR},
    {"nds", "Latn", TextLayoutDirectionLTR},
    {"ne", "Deva", TextLayoutDirectionLTR},
    {"new", "Deva", TextLayoutDirectionLTR},
    {"ng", "Latn", TextLayoutDirectionLTR},
    {"nia", "Latn", TextLayoutDirectionLTR},
    {"niu", "Latn", TextLayoutDirectionLTR},
    {"nl", "Latn", TextLayoutDirectionLTR},
    {"nmg", "Latn", TextLayoutDirectionLTR},
    {"nn", "Latn", TextLayoutDirectionLTR},
    {"nod", "Lana", TextLayoutDirectionLTR},
    {"nog", "Cyrl", TextLayoutDirectionLTR},
    {"nqo", "Nkoo", TextLayoutDirectionRTL},
    {"nr", "Latn", TextLayoutDirectionLTR},
    {"nso", "Latn", TextLayoutDirectionLTR},
    {"nus", "Latn", TextLayoutDirectionLTR},
    {"nv", "Latn", TextLayoutDirectionLTR},
    {"ny", "Latn", TextLayoutDirectionLTR},
    {"nym", "Latn", TextLayoutDirectionLTR},
    {"nyn", "Latn", TextLayoutDirectionLTR},
    {"nyo", "Latn", TextLayoutDirectionLTR},
    {"nzi", "Latn", TextLayoutDirectionLTR},
    {"oc", "Latn", TextLayoutDirectionLTR},
    {"oj", "Cans", TextLayoutDirectionLTR},
    {"om", "Latn", TextLayoutDirectionLTR},
    {"om-ET", "Ethi", TextLayoutDirectionLTR},
    {"or", "Orya", TextLayoutDirectionLTR},
    {"os", "Cyrl", TextLayoutDirectionLTR},
    {"osa", "Latn", TextLayoutDirectionLTR},
    {"osc", "Ital", TextLayoutDirectionLTR},
    {"otk", "Orkh", TextLayoutDirectionRTL},
    {"pa", "Guru", TextLayoutDirectionLTR},
    {"pa-PK", "Arab", TextLayoutDirectionRTL},
    {"pag", "Latn", TextLayoutDirectionLTR},
    {"pal", "Phli", TextLayoutDirectionRTL},
    {"pam", "Latn", TextLayoutDirectionLTR},
    {"pap", "Latn", TextLayoutDirectionLTR},
    {"pau", "Latn", TextLayoutDirectionLTR},
    {"peo", "Xpeo", TextLayoutDirectionLTR},
    {"phn", "Phnx", TextLayoutDirectionRTL},
    {"pi", "Deva", TextLayoutDirectionLTR},
    {"pl", "Latn", TextLayoutDirectionLTR},
    {"pon", "Latn", TextLayoutDirectionLTR},
    {"pra", "Brah", TextLayoutDirectionLTR},
    {"prd", "Arab", TextLayoutDirectionRTL},
    {"prg", "Latn", TextLayoutDirectionLTR},
    {"prs", "Arab", TextLayoutDirectionRTL},
    {"ps", "Arab", TextLayoutDirectionRTL},
    {"pt", "Latn", TextLayoutDirectionLTR},
    {"qu", "Latn", TextLayoutDirectionLTR},
    {"raj", "Latn", TextLayoutDirectionLTR},
    {"rap", "Latn", TextLayoutDirectionLTR},
    {"rar", "Latn", TextLayoutDirectionLTR},
    {"rcf", "Latn", TextLayoutDirectionLTR},
    {"rej", "Latn", TextLayoutDirectionLTR},
    {"rej-ID", "Rjng", TextLayoutDirectionLTR},
    {"rjs", "Deva", TextLayoutDirectionLTR},
    {"rkt", "Beng", TextLayoutDirectionLTR},
    {"rm", "Latn", TextLayoutDirectionLTR},
    {"rn", "Latn", TextLayoutDirectionLTR},
    {"ro", "Latn", TextLayoutDirectionLTR},
    {"ro-RS", "Cyrl", TextLayoutDirectionLTR},
    {"rof", "Latn", TextLayoutDirectionLTR},
    {"rom", "Cyrl", TextLayoutDirectionLTR},
    {"ru", "Cyrl", TextLayoutDirectionLTR},
    {"rup", "Latn", TextLayoutDirectionLTR},
    {"rw", "Latn", TextLayoutDirectionLTR},
    {"rwk", "Latn", TextLayoutDirectionLTR},
    {"sa", "Deva", TextLayoutDirectionLTR},
    {"sad", "Latn", TextLayoutDirectionLTR},
    {"saf", "Latn", TextLayoutDirectionLTR},
    {"sah", "Cyrl", TextLayoutDirectionLTR},
    {"sam", "Hebr", TextLayoutDirectionRTL},
    {"saq", "Latn", TextLayoutDirectionLTR},
    {"sas", "Latn", TextLayoutDirectionLTR},
    {"sat", "Latn", TextLayoutDirectionLTR},
    {"saz", "Saur", TextLayoutDirectionLTR},
    {"sbp", "Latn", TextLayoutDirectionLTR},
    {"sc", "Latn", TextLayoutDirectionLTR},
    {"scn", "Latn", TextLayoutDirectionLTR},
    {"sco", "Latn", TextLayoutDirectionLTR},
    {"sd", "Arab", TextLayoutDirectionRTL},
    {"sd-ID", "Deva", TextLayoutDirectionLTR},
    {"sdh", "Arab", TextLayoutDirectionRTL},
    {"se", "Latn", TextLayoutDirectionLTR},
    {"se-NO", "Cyrl", TextLayoutDirectionLTR},
    {"see", "Latn", TextLayoutDirectionLTR},
    {"seh", "Latn", TextLayoutDirectionLTR},
    {"sel", "Cyrl", TextLayoutDirectionLTR},
    {"ses", "Latn", TextLayoutDirectionLTR},
    {"sg", "Latn", TextLayoutDirectionLTR},
    {"sga", "Latn", TextLayoutDirectionLTR},
    {"shi", "Tfng", TextLayoutDirectionLTR},
    {"shn", "Mymr", TextLayoutDirectionLTR},
    {"si", "Sinh", TextLayoutDirectionLTR},
    {"sid", "Latn", TextLayoutDirectionLTR},
    {"sk", "Latn", TextLayoutDirectionLTR},
    {"sl", "Latn", TextLayoutDirectionLTR},
    {"sm", "Latn", TextLayoutDirectionLTR},
    {"sma", "Latn", TextLayoutDirectionLTR},
    {"smi", "Latn", TextLayoutDirectionLTR},
    {"smj", "Latn", TextLayoutDirectionLTR},
    {"smn", "Latn", TextLayoutDirectionLTR},
    {"sms", "Latn", TextLayoutDirectionLTR},
    {"sn", "Latn", TextLayoutDirectionLTR},
    {"snk", "Latn", TextLayoutDirectionLTR},
    {"so", "Latn", TextLayoutDirectionLTR},
    {"son", "Latn", TextLayoutDirectionLTR},
    {"sq", "Latn", TextLayoutDirectionLTR},
    {"sr", "Latn", TextLayoutDirectionLTR},
    {"srn", "Latn", TextLayoutDirectionLTR},
    {"srr", "Latn", TextLayoutDirectionLTR},
    {"ss", "Latn", TextLayoutDirectionLTR},
    {"ssy", "Latn", TextLayoutDirectionLTR},
    {"st", "Latn", TextLayoutDirectionLTR},
    {"su", "Latn", TextLayoutDirectionLTR},
    {"suk", "Latn", TextLayoutDirectionLTR},
    {"sus", "Latn", TextLayoutDirectionLTR},
    {"sus-GN", "Arab", TextLayoutDirectionRTL},
    {"sv", "Latn", TextLayoutDirectionLTR},
    {"sw", "Latn", TextLayoutDirectionLTR},
    {"swb", "Arab", TextLayoutDirectionRTL},
    {"swb-YT", "Latn", TextLayoutDirectionLTR},
    {"swc", "Latn", TextLayoutDirectionLTR},
    {"syl", "Beng", TextLayoutDirectionLTR},
    {"syl-BD", "Sylo", TextLayoutDirectionLTR},
    {"syr", "Syrc", TextLayoutDirectionRTL},
    {"ta", "Taml", TextLayoutDirectionLTR},
    {"tab", "Cyrl", TextLayoutDirectionLTR},
    {"tbw", "Latn", TextLayoutDirectionLTR},
    {"tcy", "Knda", TextLayoutDirectionLTR},
    {"tdd", "Tale", TextLayoutDirectionLTR},
    {"te", "Telu", TextLayoutDirectionLTR},
    {"tem", "Latn", TextLayoutDirectionLTR},
    {"teo", "Latn", TextLayoutDirectionLTR},
    {"ter", "Latn", TextLayoutDirectionLTR},
    {"tet", "Latn", TextLayoutDirectionLTR},
    {"tg", "Cyrl", TextLayoutDirectionLTR},
    {"tg-PK", "Arab", TextLayoutDirectionRTL},
    {"th", "Thai", TextLayoutDirectionLTR},
    {"ti", "Ethi", TextLayoutDirectionLTR},
    {"tig", "Ethi", TextLayoutDirectionLTR},
    {"tiv", "Latn", TextLayoutDirectionLTR},
    {"tk", "Latn", TextLayoutDirectionLTR},
    {"tkl", "Latn", TextLayoutDirectionLTR},
    {"tli", "Latn", TextLayoutDirectionLTR},
    {"tmh", "Latn", TextLayoutDirectionLTR},
    {"tn", "Latn", TextLayoutDirectionLTR},
    {"to", "Latn", TextLayoutDirectionLTR},
    {"tog", "Latn", TextLayoutDirectionLTR},
    {"tpi", "Latn", TextLayoutDirectionLTR},
    {"tr", "Latn", TextLayoutDirectionLTR},
    {"tr-ED", "Arab", TextLayoutDirectionRTL},
    {"tr-MK", "Arab", TextLayoutDirectionRTL},
    {"tru", "Latn", TextLayoutDirectionLTR},
    {"trv", "Latn", TextLayoutDirectionLTR},
    {"ts", "Latn", TextLayoutDirectionLTR},
    {"tsg", "Latn", TextLayoutDirectionLTR},
    {"tsi", "Latn", TextLayoutDirectionLTR},
    {"tt", "Cyrl", TextLayoutDirectionLTR},
    {"tts", "Thai", TextLayoutDirectionLTR},
    {"tum", "Latn", TextLayoutDirectionLTR},
    {"tut", "Cyrl", TextLayoutDirectionLTR},
    {"tvl", "Latn", TextLayoutDirectionLTR},
    {"twq", "Latn", TextLayoutDirectionLTR},
    {"ty", "Latn", TextLayoutDirectionLTR},
    {"tyv", "Cyrl", TextLayoutDirectionLTR},
    {"tzm", "Latn", TextLayoutDirectionLTR},
    {"ude", "Cyrl", TextLayoutDirectionLTR},
    {"udm", "Cyrl", TextLayoutDirectionLTR},
    {"udm-RU", "Latn", TextLayoutDirectionLTR},
    {"ug", "Arab", TextLayoutDirectionRTL},
    {"ug-KZ", "Cyrl", TextLayoutDirectionLTR},
    {"ug-MN", "Cyrl", TextLayoutDirectionLTR},
    {"uga", "Ugar", TextLayoutDirectionLTR},
    {"uk", "Cyrl", TextLayoutDirectionLTR},
    {"uli", "Latn", TextLayoutDirectionLTR},
    {"umb", "Latn", TextLayoutDirectionLTR},
    {"unr", "Beng", TextLayoutDirectionLTR},
    {"unr-NP", "Deva", TextLayoutDirectionLTR},
    {"unx", "Beng", TextLayoutDirectionLTR},
    {"ur", "Arab", TextLayoutDirectionRTL},
    {"uz", "Latn", TextLayoutDirectionLTR},
    {"uz-AF", "Arab", TextLayoutDirectionRTL},
    {"uz-CN", "Cyrl", TextLayoutDirectionLTR},
    {"vai", "Vaii", TextLayoutDirectionLTR},
    {"ve", "Latn", TextLayoutDirectionLTR},
    {"vi", "Latn", TextLayoutDirectionLTR},
    {"vi-US", "Hani", TextLayoutDirectionLTR},
    {"vo", "Latn", TextLayoutDirectionLTR},
    {"vot", "Latn", TextLayoutDirectionLTR},
    {"vun", "Latn", TextLayoutDirectionLTR},
    {"wa", "Latn", TextLayoutDirectionLTR},
    {"wae", "Latn", TextLayoutDirectionLTR},
    {"wak", "Latn", TextLayoutDirectionLTR},
    {"wal", "Ethi", TextLayoutDirectionLTR},
    {"war", "Latn", TextLayoutDirectionLTR},
    {"was", "Latn", TextLayoutDirectionLTR},
    {"wo", "Latn", TextLayoutDirectionLTR},
    {"xal", "Cyrl", TextLayoutDirectionLTR},
    {"xcr", "Cari", TextLayoutDirectionLTR},
    {"xh", "Latn", TextLayoutDirectionLTR},
    {"xog", "Latn", TextLayoutDirectionLTR},
    {"xpr", "Prti", TextLayoutDirectionRTL},
    {"xsa", "Sarb", TextLayoutDirectionRTL},
    {"xsr", "Deva", TextLayoutDirectionLTR},
    {"xum", "Ital", TextLayoutDirectionLTR},
    {"yao", "Latn", TextLayoutDirectionLTR},
    {"yap", "Latn", TextLayoutDirectionLTR},
    {"yav", "Latn", TextLayoutDirectionLTR},
    {"yi", "Hebr", TextLayoutDirectionRTL},
    {"yo", "Latn", TextLayoutDirectionLTR},
    {"yrk", "Cyrl", TextLayoutDirectionLTR},
    {"yue", "Hans", TextLayoutDirectionLTR},
    {"za", "Latn", TextLayoutDirectionLTR},
    {"za-CN", "Hans", TextLayoutDirectionLTR},
    {"zap", "Latn", TextLayoutDirectionLTR},
    {"zen", "Tfng", TextLayoutDirectionLTR},
    {"zh", "Hant", TextLayoutDirectionLTR},
    {"zh-CN", "Hans", TextLayoutDirectionLTR},
    {"zh-HK", "Hans", TextLayoutDirectionLTR},
    {"zh-MN", "Hans", TextLayoutDirectionLTR},
    {"zh-MO", "Hans", TextLayoutDirectionLTR},
    {"zh-SG", "Hans", TextLayoutDirectionLTR},
    {"zu", "Latn", TextLayoutDirectionLTR},
    {"zun", "Latn", TextLayoutDirectionLTR},
    {"zza", "Arab", TextLayoutDirectionRTL}};

const char *FontManager::language_table_[] = {"de", "en", "es", "fr",
                                              "ja", "ko", "ru", "zh"};

bool FontManager::IsLanguageSupported(const char *language) {
  if (language == nullptr) {
    return false;
  }
  // Perform binary search.
  auto p = bsearch(language, language_table_, FPL_ARRAYSIZE(language_table_),
                   sizeof(const char *),
                   [](const void * key, const void * elem)->int {
    return strcmp(reinterpret_cast<const char *>(key),
                  *static_cast<const char *const *>(elem));
  });

  return p != nullptr;
}

const ScriptInfo *FontManager::FindLocale(const char *locale) {
  if (locale == nullptr) {
    return nullptr;
  }

  // Perform binary search.
  return reinterpret_cast<const ScriptInfo *>(
      bsearch(locale, script_table_, FPL_ARRAYSIZE(script_table_),
              sizeof(ScriptInfo), [](const void * key, const void * elem)->int {
        auto info = reinterpret_cast<const ScriptInfo *>(elem);
        return strcmp(reinterpret_cast<const char *>(key), info->locale);
      }));
}

}  // namespace flatui